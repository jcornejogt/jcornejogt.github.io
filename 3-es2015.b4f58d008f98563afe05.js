(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{lGXy:function(i,e,o){"use strict";o.r(e),o.d(e,"FeedPageModule",(function(){return M}));var r=o("ofXK"),t=o("3Pt+"),n=o("spgP"),c=o("TEn/"),s=o("AytR"),a=o("tyNb"),b=o("mrSG"),d=o("fXoL"),l=o("I/3d");let u=(()=>{class i{constructor(i){this.firestore=i}createService(i){return this.firestore.collection("servicios").add(i)}getServices(){return this.firestore.collection("servicios").snapshotChanges()}getService(i){return this.firestore.collection("servicios").doc(i).snapshotChanges()}updateService(i,e){return this.firestore.collection("servicios").doc(i).set(e)}}return i.\u0275fac=function(e){return new(e||i)(d.Rb(l.a))},i.\u0275prov=d.Gb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),m=(()=>{class i{constructor(i,e,o,r){this.ModalController=i,this.firebaseServiceService=e,this.router=o,this.formBuilder=r,this.editServiceForm=r.group({id:["",t.j.required],nombreServicio:["",t.j.required],descripcionServicio:["",t.j.required],idProfesional:["",t.j.required]})}ngOnInit(){let i=this.firebaseServiceService.getService(this.documentid).subscribe(e=>{this.editServiceForm.setValue({id:this.documentid,nombreServicio:e.payload.data().nombreServicio,idProfesional:e.payload.data().idProfesional,descripcionServicio:e.payload.data().descripcionServicio}),i.unsubscribe()})}editService(i,e=this.documentid){this.firebaseServiceService.updateService(e,{id:i.id,nombreServicio:i.nombreServicio,idProfesional:i.idProfesional,descripcionServicio:i.descripcionServicio}).then(()=>{this.editServiceForm.setValue({id:"",nombreServicio:"",idProfesional:"",descripcionServicio:""}),console.log("Documento editado exit\xf3samente"),this.ModalController.dismiss()},i=>{console.log(i)})}dismissModal(){this.ModalController.dismiss()}}return i.\u0275fac=function(e){return new(e||i)(d.Kb(c.G),d.Kb(u),d.Kb(a.g),d.Kb(t.a))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-modal-edit-service"]],decls:24,vars:2,consts:[["color","primary",1,"center"],["slot","end"],[3,"click"],["name","close-circle-outline"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],["color","primary","position","stacked"],["type","text","placehorder","Ej: Jardineria","formControlName","nombreServicio"],["type","text","placehorder","Ej: Jardineria","formControlName","descripcionServicio"],["type","text","formControlName","idProfesional"],["type","submit",3,"disabled"],["name","save-outline"]],template:function(i,e){1&i&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar",0),d.Nb(2,"ion-title"),d.gc(3,"Editar servicio"),d.Mb(),d.Nb(4,"ion-buttons",1),d.Nb(5,"ion-button",2),d.Vb("click",(function(){return e.dismissModal()})),d.Lb(6,"ion-icon",3),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(7,"ion-content"),d.Nb(8,"form",4),d.Vb("ngSubmit",(function(){return e.editService(e.editServiceForm.value)})),d.Nb(9,"ion-list"),d.Nb(10,"ion-item"),d.Lb(11,"ion-input",5),d.Nb(12,"ion-label",6),d.gc(13,"Nombre del Servicio"),d.Mb(),d.Lb(14,"ion-input",7),d.Nb(15,"ion-label",6),d.gc(16,"Descripcion del servicio"),d.Mb(),d.Lb(17,"ion-input",8),d.Nb(18,"ion-label",6),d.gc(19,"Profesional"),d.Mb(),d.Lb(20,"ion-input",9),d.Nb(21,"ion-button",10),d.Lb(22,"ion-icon",11),d.gc(23," \xa0 Guardar "),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&i&&(d.Ab(8),d.ac("formGroup",e.editServiceForm),d.Ab(13),d.ac("disabled",!e.editServiceForm.valid))},directives:[c.l,c.D,c.C,c.e,c.d,c.m,c.i,t.k,t.h,t.c,c.q,c.o,c.n,c.I,t.g,t.b,c.p],styles:[""]}),i})(),v=(()=>{class i{constructor(i,e,o,r){this.ModalController=i,this.firebaseServiceService=e,this.router=o,this.formBuilder=r,this.documentId=null,this.serviceForm=r.group({nombreServicio:["",t.j.required],descripcionServicio:["",t.j.required],idProfesional:["",t.j.required]})}ngOnInit(){}addService(i,e=this.documentId){this.firebaseServiceService.createService({nombreServicio:i.nombreServicio,idProfesional:i.idProfesional,descripcionServicio:i.descripcionServicio}).then(()=>{console.log("Documento creado exit\xf3samente!"),this.serviceForm.setValue({nombreServicio:"",idProfesional:"",descripcionServicio:""})}),this.dismissModal()}dismissModal(){this.ModalController.dismiss()}}return i.\u0275fac=function(e){return new(e||i)(d.Kb(c.G),d.Kb(u),d.Kb(a.g),d.Kb(t.a))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-modal-add-service"]],decls:25,vars:2,consts:[["color","primary",1,"center"],["slot","end"],[3,"click"],["name","close-circle-outline"],[3,"formGroup","ngSubmit"],["color","primary","position","stacked"],["type","text","placehorder","Ej: Jardineria","formControlName","nombreServicio"],["type","text","placehorder","Ej: Jardineria","formControlName","descripcionServicio"],["type","text","formControlName","idProfesional"],["type","submit",3,"disabled"],["name","save-outline"]],template:function(i,e){1&i&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar",0),d.Nb(2,"ion-title"),d.gc(3,"Agregar servicio"),d.Mb(),d.Nb(4,"ion-buttons",1),d.Nb(5,"ion-button",2),d.Vb("click",(function(){return e.dismissModal()})),d.Lb(6,"ion-icon",3),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(7,"ion-content"),d.Nb(8,"form",4),d.Vb("ngSubmit",(function(){return e.addService(e.serviceForm.value)})),d.Nb(9,"ion-list"),d.Nb(10,"ion-item"),d.Nb(11,"ion-label",5),d.gc(12,"Nombre del Servicio"),d.Mb(),d.Lb(13,"ion-input",6),d.Mb(),d.Nb(14,"ion-item"),d.Nb(15,"ion-label",5),d.gc(16,"Descripcion del servicio"),d.Mb(),d.Lb(17,"ion-input",7),d.Mb(),d.Nb(18,"ion-item"),d.Nb(19,"ion-label",5),d.gc(20,"Profesional"),d.Mb(),d.Lb(21,"ion-input",8),d.Mb(),d.Mb(),d.Nb(22,"ion-button",9),d.Lb(23,"ion-icon",10),d.gc(24," \xa0 Crear nuevo servicio "),d.Mb(),d.Mb(),d.Mb()),2&i&&(d.Ab(8),d.ac("formGroup",e.serviceForm),d.Ab(14),d.ac("disabled",!e.serviceForm.valid))},directives:[c.l,c.D,c.C,c.e,c.d,c.m,c.i,t.k,t.h,t.c,c.q,c.o,c.p,c.n,c.I,t.g,t.b],styles:[""]}),i})();var p=o("lGQG"),h=o("UbJi");function f(i,e){if(1&i){const i=d.Ob();d.Nb(0,"ion-item"),d.Nb(1,"ion-thumbnail",1),d.Lb(2,"img",10),d.Mb(),d.Nb(3,"ion-label",11),d.Nb(4,"h2"),d.gc(5),d.Mb(),d.Nb(6,"p"),d.gc(7),d.Mb(),d.Nb(8,"p"),d.gc(9),d.Mb(),d.Mb(),d.Nb(10,"ion-button",4),d.Vb("click",(function(){d.cc(i);const o=e.$implicit;return d.Xb().editService(o.id)})),d.Lb(11,"ion-icon",12),d.Mb(),d.Nb(12,"ion-button"),d.Lb(13,"ion-icon",13),d.Mb(),d.Mb()}if(2&i){const i=e.$implicit;d.Ab(5),d.hc(i.data.nombreServicio),d.Ab(2),d.hc(i.data.idProfesional),d.Ab(2),d.hc(i.data.descripcionServicio)}}const S=[{path:"",component:(()=>{class i{constructor(i,e,o,r,t,n){this.router=i,this.firebaseServiceService=e,this.modalController=o,this.authSvc=r,this.afAuth=t,this.ngZone=n,this.services=[],this.isAdmin=null,this.userUid=null}ngOnInit(){this.getServices()}getServices(){this.services=[],this.firebaseServiceService.getServices().subscribe(i=>{i.forEach(i=>{this.services.push({id:i.payload.doc.id,data:i.payload.doc.data()})})})}getCurrentUser(){this.authSvc.isAuth().subscribe(i=>{i&&(this.userUid=i.uid,this.authSvc.isUserAdmin(this.userUid).subscribe(i=>{this.isAdmin=Object.assign({},i.roles),this.isAdmin=this.isAdmin.hasOwnProperty("admin")}))})}searchServices(i){const e=i.target.value;console.log("La busqueda es:"+e),this.services=[],this.firebaseServiceService.getService(e).subscribe(i=>{this.services.push({id:i.payload.id,data:i.payload.data()})})}editService(i){return Object(b.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:m,componentProps:{documentid:i}});e.onDidDismiss().then(i=>{this.getServices()}),e.present()}))}addService(){return Object(b.__awaiter)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:v});i.onDidDismiss().then(i=>{this.getServices()}),i.present()}))}logOut(){console.log("Hasta pronto!"),this.authSvc.logout()}}return i.\u0275fac=function(e){return new(e||i)(d.Kb(a.g),d.Kb(u),d.Kb(c.G),d.Kb(p.a),d.Kb(h.a),d.Kb(d.z))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-feed"]],decls:16,vars:1,consts:[["color","primary",1,"center"],["slot","start"],["autoHide","true"],["slot","secondary"],[3,"click"],["name","exit-outline"],[3,"ionInput"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-circle"],["src","../../../assets/images/nicaBandera.png"],[1,"ion-text-wrap"],["name","create-outline"],["name","trash-outline"]],template:function(i,e){1&i&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar",0),d.Nb(2,"ion-buttons",1),d.Lb(3,"ion-menu-button",2),d.Mb(),d.Nb(4,"ion-buttons",3),d.Nb(5,"ion-button",4),d.Vb("click",(function(){return e.logOut()})),d.Lb(6,"ion-icon",5),d.Mb(),d.Mb(),d.Nb(7,"ion-title"),d.gc(8,"Servicios"),d.Mb(),d.Mb(),d.Mb(),d.Nb(9,"ion-content"),d.Nb(10,"ion-searchbar",6),d.Vb("ionInput",(function(i){return e.searchServices(i)})),d.Mb(),d.Nb(11,"ion-list"),d.fc(12,f,14,3,"ion-item",7),d.Mb(),d.Nb(13,"ion-fab",8),d.Nb(14,"ion-fab-button",4),d.Vb("click",(function(){return e.addService()})),d.Lb(15,"ion-icon",9),d.Mb(),d.Mb(),d.Mb()),2&i&&(d.Ab(12),d.ac("ngForOf",e.services))},directives:[c.l,c.D,c.e,c.s,c.d,c.m,c.C,c.i,c.v,c.I,c.q,r.h,c.j,c.k,c.o,c.B,c.p],styles:[".center[_ngcontent-%COMP%]{text-align:center}"]}),i})()}];let g=(()=>{class i{}return i.\u0275mod=d.Ib({type:i}),i.\u0275inj=d.Hb({factory:function(e){return new(e||i)},imports:[[a.i.forChild(S)],a.i]}),i})(),M=(()=>{class i{}return i.\u0275mod=d.Ib({type:i}),i.\u0275inj=d.Hb({factory:function(e){return new(e||i)},imports:[[r.b,t.d,t.i,c.E,g,n.a.initializeApp(s.a.firebase)]]}),i})()}}]);