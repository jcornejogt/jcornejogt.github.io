function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var o=0;o<i.length;o++){var n=i[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,o){return i&&_defineProperties(e.prototype,i),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{lGXy:function(e,i,o){"use strict";o.r(i),o.d(i,"FeedPageModule",(function(){return w}));var n,r,t,c=o("ofXK"),s=o("3Pt+"),a=o("spgP"),l=o("TEn/"),b=o("AytR"),u=o("tyNb"),d=o("mrSG"),v=o("fXoL"),f=o("I/3d"),m=((t=function(){function e(i){_classCallCheck(this,e),this.firestore=i}return _createClass(e,[{key:"createService",value:function(e){return this.firestore.collection("servicios").add(e)}},{key:"getServices",value:function(){return this.firestore.collection("servicios").snapshotChanges()}},{key:"getService",value:function(e){return this.firestore.collection("servicios").doc(e).snapshotChanges()}},{key:"updateService",value:function(e,i){return this.firestore.collection("servicios").doc(e).set(i)}}]),e}()).\u0275fac=function(e){return new(e||t)(v.Rb(f.a))},t.\u0275prov=v.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t),p=((r=function(){function e(i,o,n,r){_classCallCheck(this,e),this.ModalController=i,this.firebaseServiceService=o,this.router=n,this.formBuilder=r,this.editServiceForm=r.group({id:["",s.j.required],nombreServicio:["",s.j.required],descripcionServicio:["",s.j.required],idProfesional:["",s.j.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,i=this.firebaseServiceService.getService(this.documentid).subscribe((function(o){e.editServiceForm.setValue({id:e.documentid,nombreServicio:o.payload.data().nombreServicio,idProfesional:o.payload.data().idProfesional,descripcionServicio:o.payload.data().descripcionServicio}),i.unsubscribe()}))}},{key:"editService",value:function(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.documentid;this.firebaseServiceService.updateService(o,{id:e.id,nombreServicio:e.nombreServicio,idProfesional:e.idProfesional,descripcionServicio:e.descripcionServicio}).then((function(){i.editServiceForm.setValue({id:"",nombreServicio:"",idProfesional:"",descripcionServicio:""}),console.log("Documento editado exit\xf3samente"),i.ModalController.dismiss()}),(function(e){console.log(e)}))}},{key:"dismissModal",value:function(){this.ModalController.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||r)(v.Kb(l.G),v.Kb(m),v.Kb(u.g),v.Kb(s.a))},r.\u0275cmp=v.Eb({type:r,selectors:[["app-modal-edit-service"]],decls:24,vars:2,consts:[["color","primary",1,"center"],["slot","end"],[3,"click"],["name","close-circle-outline"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],["color","primary","position","stacked"],["type","text","placehorder","Ej: Jardineria","formControlName","nombreServicio"],["type","text","placehorder","Ej: Jardineria","formControlName","descripcionServicio"],["type","text","formControlName","idProfesional"],["type","submit",3,"disabled"],["name","save-outline"]],template:function(e,i){1&e&&(v.Nb(0,"ion-header"),v.Nb(1,"ion-toolbar",0),v.Nb(2,"ion-title"),v.gc(3,"Editar servicio"),v.Mb(),v.Nb(4,"ion-buttons",1),v.Nb(5,"ion-button",2),v.Vb("click",(function(){return i.dismissModal()})),v.Lb(6,"ion-icon",3),v.Mb(),v.Mb(),v.Mb(),v.Mb(),v.Nb(7,"ion-content"),v.Nb(8,"form",4),v.Vb("ngSubmit",(function(){return i.editService(i.editServiceForm.value)})),v.Nb(9,"ion-list"),v.Nb(10,"ion-item"),v.Lb(11,"ion-input",5),v.Nb(12,"ion-label",6),v.gc(13,"Nombre del Servicio"),v.Mb(),v.Lb(14,"ion-input",7),v.Nb(15,"ion-label",6),v.gc(16,"Descripcion del servicio"),v.Mb(),v.Lb(17,"ion-input",8),v.Nb(18,"ion-label",6),v.gc(19,"Profesional"),v.Mb(),v.Lb(20,"ion-input",9),v.Nb(21,"ion-button",10),v.Lb(22,"ion-icon",11),v.gc(23," \xa0 Guardar "),v.Mb(),v.Mb(),v.Mb(),v.Mb(),v.Mb()),2&e&&(v.Ab(8),v.ac("formGroup",i.editServiceForm),v.Ab(13),v.ac("disabled",!i.editServiceForm.valid))},directives:[l.l,l.D,l.C,l.e,l.d,l.m,l.i,s.k,s.h,s.c,l.q,l.o,l.n,l.I,s.g,s.b,l.p],styles:[""]}),r),h=((n=function(){function e(i,o,n,r){_classCallCheck(this,e),this.ModalController=i,this.firebaseServiceService=o,this.router=n,this.formBuilder=r,this.documentId=null,this.serviceForm=r.group({nombreServicio:["",s.j.required],descripcionServicio:["",s.j.required],idProfesional:["",s.j.required]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"addService",value:function(e){var i=this;arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.documentId,this.firebaseServiceService.createService({nombreServicio:e.nombreServicio,idProfesional:e.idProfesional,descripcionServicio:e.descripcionServicio}).then((function(){console.log("Documento creado exit\xf3samente!"),i.serviceForm.setValue({nombreServicio:"",idProfesional:"",descripcionServicio:""})})),this.dismissModal()}},{key:"dismissModal",value:function(){this.ModalController.dismiss()}}]),e}()).\u0275fac=function(e){return new(e||n)(v.Kb(l.G),v.Kb(m),v.Kb(u.g),v.Kb(s.a))},n.\u0275cmp=v.Eb({type:n,selectors:[["app-modal-add-service"]],decls:25,vars:2,consts:[["color","primary",1,"center"],["slot","end"],[3,"click"],["name","close-circle-outline"],[3,"formGroup","ngSubmit"],["color","primary","position","stacked"],["type","text","placehorder","Ej: Jardineria","formControlName","nombreServicio"],["type","text","placehorder","Ej: Jardineria","formControlName","descripcionServicio"],["type","text","formControlName","idProfesional"],["type","submit",3,"disabled"],["name","save-outline"]],template:function(e,i){1&e&&(v.Nb(0,"ion-header"),v.Nb(1,"ion-toolbar",0),v.Nb(2,"ion-title"),v.gc(3,"Agregar servicio"),v.Mb(),v.Nb(4,"ion-buttons",1),v.Nb(5,"ion-button",2),v.Vb("click",(function(){return i.dismissModal()})),v.Lb(6,"ion-icon",3),v.Mb(),v.Mb(),v.Mb(),v.Mb(),v.Nb(7,"ion-content"),v.Nb(8,"form",4),v.Vb("ngSubmit",(function(){return i.addService(i.serviceForm.value)})),v.Nb(9,"ion-list"),v.Nb(10,"ion-item"),v.Nb(11,"ion-label",5),v.gc(12,"Nombre del Servicio"),v.Mb(),v.Lb(13,"ion-input",6),v.Mb(),v.Nb(14,"ion-item"),v.Nb(15,"ion-label",5),v.gc(16,"Descripcion del servicio"),v.Mb(),v.Lb(17,"ion-input",7),v.Mb(),v.Nb(18,"ion-item"),v.Nb(19,"ion-label",5),v.gc(20,"Profesional"),v.Mb(),v.Lb(21,"ion-input",8),v.Mb(),v.Mb(),v.Nb(22,"ion-button",9),v.Lb(23,"ion-icon",10),v.gc(24," \xa0 Crear nuevo servicio "),v.Mb(),v.Mb(),v.Mb()),2&e&&(v.Ab(8),v.ac("formGroup",i.serviceForm),v.Ab(14),v.ac("disabled",!i.serviceForm.valid))},directives:[l.l,l.D,l.C,l.e,l.d,l.m,l.i,s.k,s.h,s.c,l.q,l.o,l.p,l.n,l.I,s.g,s.b],styles:[""]}),n),S=o("lGQG"),g=o("UbJi");function M(e,i){if(1&e){var o=v.Ob();v.Nb(0,"ion-item"),v.Nb(1,"ion-thumbnail",1),v.Lb(2,"img",10),v.Mb(),v.Nb(3,"ion-label",11),v.Nb(4,"h2"),v.gc(5),v.Mb(),v.Nb(6,"p"),v.gc(7),v.Mb(),v.Nb(8,"p"),v.gc(9),v.Mb(),v.Mb(),v.Nb(10,"ion-button",4),v.Vb("click",(function(){v.cc(o);var e=i.$implicit;return v.Xb().editService(e.id)})),v.Lb(11,"ion-icon",12),v.Mb(),v.Nb(12,"ion-button"),v.Lb(13,"ion-icon",13),v.Mb(),v.Mb()}if(2&e){var n=i.$implicit;v.Ab(5),v.hc(n.data.nombreServicio),v.Ab(2),v.hc(n.data.idProfesional),v.Ab(2),v.hc(n.data.descripcionServicio)}}var y,N,C,k=[{path:"",component:(y=function(){function e(i,o,n,r,t,c){_classCallCheck(this,e),this.router=i,this.firebaseServiceService=o,this.modalController=n,this.authSvc=r,this.afAuth=t,this.ngZone=c,this.services=[],this.isAdmin=null,this.userUid=null}return _createClass(e,[{key:"ngOnInit",value:function(){this.getServices()}},{key:"getServices",value:function(){var e=this;this.services=[],this.firebaseServiceService.getServices().subscribe((function(i){i.forEach((function(i){e.services.push({id:i.payload.doc.id,data:i.payload.doc.data()})}))}))}},{key:"getCurrentUser",value:function(){var e=this;this.authSvc.isAuth().subscribe((function(i){i&&(e.userUid=i.uid,e.authSvc.isUserAdmin(e.userUid).subscribe((function(i){e.isAdmin=Object.assign({},i.roles),e.isAdmin=e.isAdmin.hasOwnProperty("admin")})))}))}},{key:"searchServices",value:function(e){var i=this,o=e.target.value;console.log("La busqueda es:"+o),this.services=[],this.firebaseServiceService.getService(o).subscribe((function(e){i.services.push({id:e.payload.id,data:e.payload.data()})}))}},{key:"editService",value:function(e){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o,n=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.modalController.create({component:p,componentProps:{documentid:e}});case 2:(o=i.sent).onDidDismiss().then((function(e){n.getServices()})),o.present();case 4:case"end":return i.stop()}}),i,this)})))}},{key:"addService",value:function(){return Object(d.__awaiter)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:h});case 2:(i=e.sent).onDidDismiss().then((function(e){o.getServices()})),i.present();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"logOut",value:function(){console.log("Hasta pronto!"),this.authSvc.logout()}}]),e}(),y.\u0275fac=function(e){return new(e||y)(v.Kb(u.g),v.Kb(m),v.Kb(l.G),v.Kb(S.a),v.Kb(g.a),v.Kb(v.z))},y.\u0275cmp=v.Eb({type:y,selectors:[["app-feed"]],decls:16,vars:1,consts:[["color","primary",1,"center"],["slot","start"],["autoHide","true"],["slot","secondary"],[3,"click"],["name","exit-outline"],[3,"ionInput"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-circle"],["src","../../../assets/images/nicaBandera.png"],[1,"ion-text-wrap"],["name","create-outline"],["name","trash-outline"]],template:function(e,i){1&e&&(v.Nb(0,"ion-header"),v.Nb(1,"ion-toolbar",0),v.Nb(2,"ion-buttons",1),v.Lb(3,"ion-menu-button",2),v.Mb(),v.Nb(4,"ion-buttons",3),v.Nb(5,"ion-button",4),v.Vb("click",(function(){return i.logOut()})),v.Lb(6,"ion-icon",5),v.Mb(),v.Mb(),v.Nb(7,"ion-title"),v.gc(8,"Servicios"),v.Mb(),v.Mb(),v.Mb(),v.Nb(9,"ion-content"),v.Nb(10,"ion-searchbar",6),v.Vb("ionInput",(function(e){return i.searchServices(e)})),v.Mb(),v.Nb(11,"ion-list"),v.fc(12,M,14,3,"ion-item",7),v.Mb(),v.Nb(13,"ion-fab",8),v.Nb(14,"ion-fab-button",4),v.Vb("click",(function(){return i.addService()})),v.Lb(15,"ion-icon",9),v.Mb(),v.Mb(),v.Mb()),2&e&&(v.Ab(12),v.ac("ngForOf",i.services))},directives:[l.l,l.D,l.e,l.s,l.d,l.m,l.C,l.i,l.v,l.I,l.q,c.h,l.j,l.k,l.o,l.B,l.p],styles:[".center[_ngcontent-%COMP%]{text-align:center}"]}),y)}],P=((C=function e(){_classCallCheck(this,e)}).\u0275mod=v.Ib({type:C}),C.\u0275inj=v.Hb({factory:function(e){return new(e||C)},imports:[[u.i.forChild(k)],u.i]}),C),w=((N=function e(){_classCallCheck(this,e)}).\u0275mod=v.Ib({type:N}),N.\u0275inj=v.Hb({factory:function(e){return new(e||N)},imports:[[c.b,s.d,s.i,l.E,P,a.a.initializeApp(b.a.firebase)]]}),N)}}]);